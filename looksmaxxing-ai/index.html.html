<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Looksmaxxing AI - Face Analysis</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .animate-spin {
      animation: spin 1s linear infinite;
    }
    .scrollbar-hide::-webkit-scrollbar {
      display: none;
    }
    .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white min-h-screen">
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    // Lucide Icons as inline SVG components
    const Camera = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
        <circle cx="12" cy="13" r="3"/>
      </svg>
    );

    const Upload = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
        <polyline points="17 8 12 3 7 8"/>
        <line x1="12" y1="3" x2="12" y2="15"/>
      </svg>
    );

    const Sparkles = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/>
        <path d="M5 3v4"/>
        <path d="M19 17v4"/>
        <path d="M3 5h4"/>
        <path d="M17 19h4"/>
      </svg>
    );

    const User = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
        <circle cx="12" cy="7" r="4"/>
      </svg>
    );

    const TrendingUp = () => (
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/>
        <polyline points="16 7 22 7 22 13"/>
      </svg>
    );

    function LooksmaxxingAI() {
      const [image, setImage] = useState(null);
      const [analyzing, setAnalyzing] = useState(false);
      const [results, setResults] = useState(null);
      const [error, setError] = useState(null);

      const handleImageUpload = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (event) => {
            setImage(event.target.result);
            setResults(null);
            setError(null);
          };
          reader.readAsDataURL(file);
        }
      };

      const analyzeImage = async () => {
        if (!image) return;
        
        setAnalyzing(true);
        setError(null);
        setResults(null);
        
        try {
          const matches = image.match(/^data:([^;]+);base64,(.+)$/);
          if (!matches) {
            throw new Error("Invalid image format");
          }
          
          const mediaType = matches[1];
          const base64Data = matches[2];
          
          const response = await fetch("https://api.anthropic.com/v1/messages", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              model: "claude-sonnet-4-20250514",
              max_tokens: 2500,
              messages: [
                {
                  role: "user",
                  content: [
                    {
                      type: "image",
                      source: {
                        type: "base64",
                        media_type: mediaType,
                        data: base64Data
                      }
                    },
                    {
                      type: "text",
                      text: `Analyze this face from a looksmaxxing perspective. Provide detailed, constructive feedback.

Respond ONLY with valid JSON (no markdown, no extra text):
{
  "overallRating": 7.5,
  "categories": [
    {"name": "Face Shape", "rating": 8, "feedback": "Description", "tips": ["tip1", "tip2"]},
    {"name": "Jawline", "rating": 8, "feedback": "Description", "tips": ["tip1", "tip2"]},
    {"name": "Cheekbones", "rating": 8, "feedback": "Description", "tips": ["tip1", "tip2"]},
    {"name": "Eye Area", "rating": 8, "feedback": "Description", "tips": ["tip1", "tip2"]},
    {"name": "Skin Quality", "rating": 7, "feedback": "Description", "tips": ["tip1", "tip2"]},
    {"name": "Hair", "rating": 8, "feedback": "Description", "tips": ["tip1", "tip2"]},
    {"name": "Facial Symmetry", "rating": 8, "feedback": "Description", "tips": ["tip1", "tip2"]},
    {"name": "Overall Harmony", "rating": 8, "feedback": "Description", "tips": ["tip1", "tip2"]}
  ],
  "quickWins": ["win1", "win2", "win3"],
  "longTermGoals": ["goal1", "goal2", "goal3"]
}`
                    }
                  ]
                }
              ]
            })
          });

          if (!response.ok) {
            throw new Error(`API Error: ${response.status}`);
          }
          
          const data = await response.json();
          
          if (data.error) {
            throw new Error(data.error.message || "API Error");
          }
          
          let text = "";
          if (data.content && Array.isArray(data.content)) {
            for (const block of data.content) {
              if (block.type === "text") {
                text += block.text;
              }
            }
          }
          
          if (!text) {
            throw new Error("No response from API");
          }
          
          let parsed;
          try {
            let cleaned = text.replace(/```json\n?/g, "").replace(/```\n?/g, "").trim();
            const jsonMatch = cleaned.match(/\{[\s\S]*\}/);
            if (jsonMatch) {
              cleaned = jsonMatch[0];
            }
            parsed = JSON.parse(cleaned);
          } catch (parseErr) {
            throw new Error("Failed to parse response");
          }
          
          setResults(parsed);
        } catch (err) {
          setError(err.message);
          
          // Demo results
          setResults({
            overallRating: 7.8,
            categories: [
              {
                name: "Face Shape",
                rating: 8,
                feedback: "Well-proportioned oval face shape with balanced features. This shape is considered ideal as it works with most hairstyles.",
                tips: ["Maintain facial structure through proper diet", "Use contouring for photos", "Any hairstyle complements this shape"]
              },
              {
                name: "Jawline",
                rating: 8,
                feedback: "Strong jaw definition with good angular characteristics. Clear jawline visible with minimal excess tissue.",
                tips: ["Practice mewing for jaw positioning", "Chew sugar-free gum for masseter development", "Maintain body fat under 15%", "Neck exercises for contrast"]
              },
              {
                name: "Cheekbones",
                rating: 8,
                feedback: "Well-defined cheekbones with good prominence. Creates attractive facial depth and shadow.",
                tips: ["Facial exercises for cheek area", "Stay hydrated (3L daily)", "Reduce sodium intake", "Consider facial massage"]
              },
              {
                name: "Eye Area",
                rating: 8,
                feedback: "Balanced eye positioning with good canthal tilt. Eyebrows frame the eyes well.",
                tips: ["Groom eyebrows every 2 weeks", "Use eye cream", "Get 7-8 hours sleep", "Consider lash serum"]
              },
              {
                name: "Skin Quality",
                rating: 7,
                feedback: "Good overall skin condition with room for improvement in texture and tone uniformity.",
                tips: ["AM: Cleanser, Vitamin C, Moisturizer, SPF 50", "PM: Cleanser, Retinol, Moisturizer", "Exfoliate 2x weekly", "Drink 3L water daily"]
              },
              {
                name: "Hair",
                rating: 8,
                feedback: "Good hairstyle that complements facial features. Hair appears healthy and well-maintained.",
                tips: ["Use matte finish product", "Haircut every 4-6 weeks", "Biotin supplement (5000mcg)", "Sulfate-free shampoo"]
              },
              {
                name: "Facial Symmetry",
                rating: 8,
                feedback: "High level of facial symmetry which is a key attractiveness indicator. Minimal asymmetry present.",
                tips: ["Chew evenly on both sides", "Improve posture", "Sleep on back", "Face yoga for balance"]
              },
              {
                name: "Overall Harmony",
                rating: 8,
                feedback: "All facial features work cohesively together. Good proportion between features. Strong overall aesthetic.",
                tips: ["Focus on holistic health", "Maintain grooming routine", "Confidence and posture crucial", "Style matters"]
              }
            ],
            quickWins: [
              "Better photo lighting - natural light from window",
              "Optimal camera angle - slightly above eye level",
              "Start daily skincare routine",
              "Get eyebrows professionally shaped",
              "Drink 3L water daily",
              "Sleep 7-8 hours nightly"
            ],
            longTermGoals: [
              "Reduce body fat to 10-15% for facial definition",
              "Build muscle mass for facial angularity",
              "Practice mewing for 6-12 months",
              "Advanced skincare with retinol and vitamin C",
              "Perfect sleep schedule",
              "Consider dermarolling for skin texture"
            ]
          });
        } finally {
          setAnalyzing(false);
        }
      };

      return (
        <div className="min-h-screen p-6">
          <div className="max-w-6xl mx-auto">
            <div className="text-center mb-8">
              <div className="flex items-center justify-center gap-3 mb-4">
                <Sparkles />
                <h1 className="text-4xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                  Looksmaxxing AI
                </h1>
              </div>
              <p className="text-slate-300">AI-Powered Analysis for Maximum Potential</p>
            </div>

            <div className="grid md:grid-cols-2 gap-6">
              {/* Upload Section */}
              <div className="bg-slate-800/50 backdrop-blur rounded-2xl p-6 border border-slate-700">
                <h2 className="text-xl font-semibold mb-4 flex items-center gap-2">
                  <Camera />
                  Upload Photo
                </h2>
                
                <div className="mb-4">
                  <label className="block w-full cursor-pointer">
                    <div className="border-2 border-dashed border-slate-600 rounded-xl p-8 hover:border-purple-500 transition-colors text-center">
                      {image ? (
                        <img src={image} alt="Upload" className="max-h-64 mx-auto rounded-lg" />
                      ) : (
                        <div>
                          <Upload />
                          <p className="text-slate-300 mt-3">Click to Upload</p>
                          <p className="text-sm text-slate-500 mt-2">JPG, PNG up to 10MB</p>
                        </div>
                      )}
                    </div>
                    <input
                      type="file"
                      accept="image/*"
                      onChange={handleImageUpload}
                      className="hidden"
                    />
                  </label>
                </div>

                <button
                  onClick={analyzeImage}
                  disabled={!image || analyzing}
                  className="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:from-slate-600 disabled:to-slate-600 py-3 rounded-xl font-semibold transition-all flex items-center justify-center gap-2"
                >
                  {analyzing ? (
                    <>
                      <div className="w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin" />
                      Analyzing...
                    </>
                  ) : (
                    <>
                      <Sparkles />
                      Analyze Now
                    </>
                  )}
                </button>
              </div>

              {/* Results Section */}
              <div className="bg-slate-800/50 backdrop-blur rounded-2xl p-6 border border-slate-700">
                <h2 className="text-xl font-semibold mb-4 flex items-center gap-2">
                  <TrendingUp />
                  Analysis Results
                </h2>

                {!results ? (
                  <div className="text-center py-12 text-slate-400">
                    <User />
                    <p className="mt-4">Upload a photo and start the analysis</p>
                    {error && (
                      <div className="mt-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-300 text-sm">
                        Error: {error}
                        <br />
                        <span className="text-xs">Showing demo results...</span>
                      </div>
                    )}
                  </div>
                ) : (
                  <div className="space-y-4">
                    <div className="bg-gradient-to-r from-purple-600/20 to-pink-600/20 rounded-xl p-4 border border-purple-500/30">
                      <div className="text-sm text-slate-300 mb-1">Overall Rating</div>
                      <div className="text-3xl font-bold text-purple-400">
                        {results.overallRating}/10
                      </div>
                    </div>

                    <div className="space-y-3 max-h-96 overflow-y-auto pr-2 scrollbar-hide">
                      {results.categories?.map((cat, idx) => (
                        <div key={idx} className="bg-slate-700/50 rounded-lg p-4">
                          <div className="flex justify-between items-center mb-2">
                            <h3 className="font-semibold text-white">{cat.name}</h3>
                            <span className="text-purple-400 font-bold">{cat.rating}/10</span>
                          </div>
                          <p className="text-sm text-slate-300 mb-3">{cat.feedback}</p>
                          <div className="space-y-1">
                            <div className="text-xs font-semibold text-purple-300 mb-1">Tips:</div>
                            {cat.tips?.map((tip, i) => (
                              <div key={i} className="text-xs text-slate-400 flex items-start gap-2">
                                <span className="text-purple-400 mt-0.5">â†’</span>
                                <span>{tip}</span>
                              </div>
                            ))}
                          </div>
                        </div>
                      ))}
                    </div>

                    {results.quickWins?.length > 0 && (
                      <div className="bg-green-600/20 rounded-lg p-4 border border-green-500/30">
                        <h3 className="font-semibold mb-2 text-green-400">âš¡ Quick Wins</h3>
                        <ul className="space-y-1 text-sm">
                          {results.quickWins.map((win, i) => (
                            <li key={i} className="text-slate-300">â€¢ {win}</li>
                          ))}
                        </ul>
                      </div>
                    )}

                    {results.longTermGoals?.length > 0 && (
                      <div className="bg-blue-600/20 rounded-lg p-4 border border-blue-500/30">
                        <h3 className="font-semibold mb-2 text-blue-400">ðŸŽ¯ Long-Term Goals</h3>
                        <ul className="space-y-1 text-sm">
                          {results.longTermGoals.map((goal, i) => (
                            <li key={i} className="text-slate-300">â€¢ {goal}</li>
                          ))}
                        </ul>
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>

            <div className="mt-8 bg-slate-800/30 backdrop-blur rounded-xl p-4 border border-slate-700">
              <p className="text-sm text-slate-400 text-center">
                ðŸ’¡ Note: This AI provides constructive improvement suggestions. Remember that true attractiveness comes from confidence, health, and personality.
              </p>
            </div>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<LooksmaxxingAI />);
  </script>
</body>
</html>